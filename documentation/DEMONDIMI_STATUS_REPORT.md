# üìä –°–¢–ê–¢–£–° –í–ù–ï–î–†–ï–ù–ò–Ø –î–û–ú–ï–ù–ê demondimi.ru

**–î–∞—Ç–∞:** 06.07.2025  
**–°—Ç–∞—Ç—É—Å:** –ì–û–¢–û–í –ö –ê–ö–¢–ò–í–ê–¶–ò–ò  
**–û–∂–∏–¥–∞–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞  

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

### 1. **–ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω:**
```python
‚úÖ /app/backend/server.py:
   - set_webhook() —Ñ—É–Ω–∫—Ü–∏—è: demondimi.ru
   - system_webhook callback: –æ–±–Ω–æ–≤–ª–µ–Ω —Ç–µ–∫—Å—Ç
   - –í—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö URL –∑–∞–º–µ–Ω–µ–Ω—ã

‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å –ø–æ–º–æ—â—å—é grep:
   - –í—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ preview.emergentagent.com –æ–±–Ω–æ–≤–ª–µ–Ω—ã
   - Cloudflare tunnel URL –∑–∞–º–µ–Ω–µ–Ω—ã
```

### 2. **–§–∞–π–ª—ã –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã:**
```
‚úÖ /app/deployment/webhook_proxy/demondimi_webhook.php
   - PHP proxy –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

‚úÖ /app/scripts/migrate_to_demondimi.sh  
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
```

### 3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞:**
```
‚úÖ DEMONDIMI_DOMAIN_SETUP.md - –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
‚úÖ DEMONDIMI_MIGRATION_GUIDE.md - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è  
‚úÖ TECHNICAL_SPEC_V4_CODE_ACCURATE.md - –û–±–Ω–æ–≤–ª–µ–Ω–∞
‚úÖ –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
```

---

## üö® –¢–ï–ö–£–©–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

### SSL Certificate Issue:
```bash
–î–æ–º–µ–Ω: demondimi.ru  
IP: 83.222.18.104
–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: –í—ã–¥–∞–Ω –¥–ª—è baseshinomontaz.ru ‚ùå
Provider: Let's Encrypt R10

Telegram –æ—à–∏–±–∫–∞: "SSL error certificate verify failed"
```

**–ù–µ–æ–±—Ö–æ–¥–∏–º–æ:** –ü–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞

---

## üîÑ –í–†–ï–ú–ï–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï

### –¢–µ–∫—É—â–∏–π webhook:
```
URL: https://8867069a-d008-4da6-8b30-bdb8e855fcb4.preview.emergentagent.com/api/webhook
–°—Ç–∞—Ç—É—Å: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
–†–µ—à–µ–Ω–∏–µ: –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VPS (–±–µ–∑ Cloudflare tunnel)
```

---

## üéØ –ü–õ–ê–ù –ê–ö–¢–ò–í–ê–¶–ò–ò

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è SSL:

#### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è:**
```bash
# –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞:
/app/scripts/migrate_to_demondimi.sh

# –°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–æ–º–µ–Ω–∞
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞  
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ PHP —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ
4. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook –Ω–∞ demondimi.ru
5. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
6. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
7. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –æ –º–∏–≥—Ä–∞—Ü–∏–∏
```

#### **–†—É—á–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è:**
```bash
# 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥ demondimi.ru:
–§–∞–π–ª: /app/deployment/webhook_proxy/demondimi_webhook.php
–ö–∞–∫: webhook.php (–≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å webhook:
curl -X POST "https://api.telegram.org/bot{TOKEN}/setWebhook" \
  -d '{"url": "https://demondimi.ru/webhook.php"}'

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:
curl "https://api.telegram.org/bot{TOKEN}/getWebhookInfo"
```

---

## üìã –§–ê–ô–õ–´ –î–õ–Ø –•–û–°–¢–ò–ù–ì–ê

### webhook.php —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:
```php
<?php
// Webhook proxy for demondimi.ru ‚Üí VPS
$vps_url = "https://8867069a-d008-4da6-8b30-bdb8e855fcb4.preview.emergentagent.com";
$input = file_get_contents('php://input');
$target_url = $vps_url . "/api/webhook";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $target_url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $input);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);
curl_setopt($ch, CURLOPT_HTTPHEADER, ['Content-Type: application/json']);

$response = curl_exec($ch);
$http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
$log = date('[Y-m-d H:i:s] ') . "Code: $http_code\n";
file_put_contents('webhook_log.txt', $log, FILE_APPEND);

echo $response ?: json_encode(["status" => "forwarded"]);
?>
```

---

## üéâ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

### –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:
```yaml
Webhook URL: https://demondimi.ru/webhook.php ‚úÖ
SSL Certificate: Valid for demondimi.ru ‚úÖ
Dependency: –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ ‚úÖ
Branding: –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω ‚úÖ
Control: –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚úÖ
Monitoring: –õ–æ–≥–∏ webhook –Ω–∞ demondimi.ru ‚úÖ
Stability: 24/7 —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –ø–µ—Ä–µ–±–æ–µ–≤ ‚úÖ
```

---

## üìû –î–ï–ô–°–¢–í–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:
1. **–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ö–æ—Å—Ç–∏–Ω–≥ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É** demondimi.ru
2. **–ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–µ—Ä–µ–≤—ã–ø—É—Å–∫ SSL** —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è demondimi.ru  
3. **–î–æ–∂–¥–∞—Ç—å—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** (24-48 —á–∞—Å–æ–≤)

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è SSL:
1. **–ó–∞–≥—Ä—É–∑–∏—Ç—å webhook.php** –≤ –∫–æ—Ä–µ–Ω—å —Å–∞–π—Ç–∞ demondimi.ru
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:** `/app/scripts/migrate_to_demondimi.sh`
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞** –≤ Telegram
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:** https://demondimi.ru/webhook_log.txt

---

## üìä –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ú–ò–ì–†–ê–¶–ò–ò

```yaml
Code Updates: 100% ‚úÖ
Documentation: 100% ‚úÖ  
PHP Proxy Script: 100% ‚úÖ
Migration Script: 100% ‚úÖ
Testing Plan: 100% ‚úÖ
Rollback Plan: 100% ‚úÖ

Waiting For: SSL Certificate Fix ‚è≥
ETA: 24-48 hours
```

**–í—Å–µ –≥–æ—Ç–æ–≤–æ! –û–∂–∏–¥–∞–µ–º —Ç–æ–ª—å–∫–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥–æ–º–µ–Ω demondimi.ru.**

---

*–ü–æ–ª–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω!*  
*–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç ‚Üí –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏ ‚Üí –ì–æ—Ç–æ–≤–æ!*